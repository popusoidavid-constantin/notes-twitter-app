(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{7304:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notes/edit/[id]",function(){return n(5248)}])},5248:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n(7458),s=n(2983),r=n(3389),l=n(2058);function a(){let[e,t]=(0,s.useState)([]),[n,a]=(0,s.useState)(null),[i,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[f,b]=(0,s.useState)(!1),x=(0,r.useRouter)(),{id:g}=x.query,w=async()=>{try{let e=await fetch("/api/profile/get-teachers",{method:"GET"});if(!e.ok){console.error("Something went wrong");return}let n=await e.json();t(n.teachers)}catch(o){console.error("Note info could not be fetched",o)}},p=async e=>{try{let t=await fetch("/api/notes/".concat(e),{method:"GET"});if(!t.ok){console.error("Something went wrong");return}let n=await t.json();a(n.note),u(n.note.title),m(n.note.content),b(n.note.isPublic)}catch(o){console.error("Note info could not be fetched",o)}};if((0,s.useEffect)(()=>{g&&(p(g),w())},[g]),!n)return(0,o.jsx)(l.Z,{});let y=async e=>{e.preventDefault();try{let t=await fetch("/api/notes/edit",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:d,content:h,isPublic:f,noteId:n.id,teacherId:i||null})}),o=await t.json();if(!t.ok){alert(o.error||o.message||"Something went wrong");return}x.push("/notes")}catch(s){console.log("Something went wrong",s)}},j=async()=>{try{await fetch("/api/notes/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({noteId:n.id})}),alert("Note ".concat(n.title," deleted")),x.push("/notes/my-notes")}catch(e){console.log("Something went wrong",e)}};return(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"flex flex-col justify-center items-center h-screen bg-gray-100",children:(0,o.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg shadow-[#787878] w-[90%] md:w-[60%] lg:w-[40%] mt-20",children:[(0,o.jsx)("h2",{className:"text-3xl font-semibold text-center mb-6 text-blue-900",children:"Edit Note"}),(0,o.jsxs)("form",{className:"space-y-6",onSubmit:y,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Note Title"}),(0,o.jsx)("input",{type:"text",id:"title",name:"title",required:!0,className:"mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",value:d,onChange:e=>u(e.target.value)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Note Content"}),(0,o.jsx)("textarea",{id:"content",name:"content",required:!0,className:"mt-1 w-full text-start px-4 py-3 h-[20vh] border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",value:h,onChange:e=>m(e.target.value)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"isPublic",className:"block text-sm font-medium text-gray-700",children:"Is Public"}),(0,o.jsx)("input",{type:"checkbox",id:"isPublic",name:"isPublic",className:"mt-1",checked:f,onChange:()=>b(e=>!e)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"teacher",className:"block text-sm font-medium text-gray-700",children:"Share Note With Teacher:"}),(0,o.jsxs)("select",{id:"teacher",name:"teacher",className:"mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",value:i,onChange:e=>c(e.target.value),children:[(0,o.jsx)("option",{value:"",children:"Select a teacher or not:"}),e.map(e=>(0,o.jsx)("option",{value:e.id,children:e.username},e.id))]})]}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)("button",{type:"submit",className:"w-[50%] bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 focus:outline-none font-semibold",children:"Edit Note"})})]}),(0,o.jsx)("div",{className:"flex justify-center mt-6",children:(0,o.jsx)("button",{onClick:j,className:"w-[50%] bg-red-500 text-white py-3 rounded-lg hover:bg-red-600 focus:outline-none font-semibold",children:"Delete Note"})})]})})})}function i(){return(0,o.jsx)(a,{})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7304)}),_N_E=e.O()}]);