(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[397],{2704:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notes",function(){return r(4618)}])},4618:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var o=r(7458),n=r(2983),l=r(3389);let s=e=>{if(!e)return!1;try{let t=e.split(".")[1];if(!t)return localStorage.removeItem("token"),!1;let r=t.replace(/-/g,"+").replace(/_/g,"/"),o=JSON.parse(window.atob(r));if(o.exp&&1e3*o.exp<Date.now())return console.log("Token has expired, removing from localStorage"),localStorage.removeItem("token"),!1;return!0}catch(n){return console.error("Invalid token format:",n),localStorage.removeItem("token"),!1}};var a=r(5413),i=r(2058);function c(){let e=(0,l.useRouter)(),[t,r]=(0,n.useState)(null),[c,u]=(0,n.useState)(null),[d,h]=(0,n.useState)(!0),[f,m]=(0,n.useState)(null);return((0,n.useEffect)(()=>{let t=async()=>{let t=localStorage.getItem("token"),r=s(t);r||(console.log("No valid token found"),e.push("/"));try{let n=await fetch("/api/profile/dashboard",{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),l=await n.json();if(401===n.status||"User not found"===l.error){console.log("Token expired or invalid, redirecting to login"),localStorage.removeItem("token"),e.push("/");return}l.user?(u(l.user),o()):(console.error(l.error),m(l.error),h(!1))}catch(a){console.error("Error fetching user data:",a),m("Failed to authenticate"),h(!1)}},o=async()=>{try{let e=await fetch("/api/notes/public",{method:"GET"}),t=await e.json();t&&t.notes?r(t.notes):(console.error(t.error),m(t.error||"Failed to fetch notes"))}catch(o){console.error("Error fetching notes:",o),m("Failed to fetch notes")}finally{h(!1)}};t()},[e]),d)?(0,o.jsx)(i.Z,{}):f||!t||0===t.length?(0,o.jsx)("p",{children:"No notes available"}):(0,o.jsxs)("div",{className:"min-h-screen bg-blue-900 py-10 px-4 sm:px-6 lg:px-8",children:[(0,o.jsx)("h1",{className:"text-white text-3xl font-bold mb-8 text-center",children:"\uD83D\uDCD8 Public Student Notes"}),(0,o.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e,t)=>(0,o.jsx)(a.Z,{note:e,index:t}))})]})}function u(){return(0,o.jsx)(c,{})}},5413:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var o=r(7458);r(2983);var n=r(8317),l=r.n(n);function s(e){let{note:t,index:r}=e;return(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow duration-300",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-blue-900 mb-2",children:t.title}),(0,o.jsx)("p",{className:"text-gray-700 text-sm mb-4 line-clamp-4",children:t.description}),(0,o.jsx)("div",{className:"text-right",children:(0,o.jsx)(l(),{href:"/notes/".concat(t.id),className:"text-blue-600 hover:underline font-medium text-sm",children:"View Note â†’"})})]},r)}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=2704)}),_N_E=e.O()}]);